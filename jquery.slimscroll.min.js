/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.9
 *
 */
!function(t){t.fn.extend({slimScroll:function(i){var e={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,horizontal:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",railClassH:"slimScrollRailHor",barClass:"slimScrollBar",barClassH:"slimScrollBarHor",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},o=t.extend(e,i);return this.each(function(){function e(i){if(c){i=i||window.event;var e=0;i.wheelDelta&&(e=-i.wheelDelta/120),i.detail&&(e=i.detail/3);var a=i.target||i.srcTarget||i.srcElement;t(a).closest("."+o.wrapperClass).is(I.parent())&&s(0,e,!0),i.preventDefault&&!M&&i.preventDefault(),M||(i.returnValue=!1)}}function s(t,i,e,s){M=!1;var a=t,r=i,l=I.outerHeight()-T.outerHeight()-(o.horizontal?o.size:0),c=o.horizontal&&I.outerWidth()-x.outerWidth()-o.size;if(e&&(r=parseInt(T.css("top"))+i*parseInt(o.wheelStep)/100*T.outerHeight(),r=Math.min(Math.max(r,0),l),r=i>0?Math.ceil(r):Math.floor(r),T.css({top:r+"px"}),o.horizontal&&(a=parseInt(x.css("left"))+t*parseInt(o.wheelStep)/100*x.outerWidth(),a=Math.min(Math.max(a,0),c),a=t>0?Math.ceil(a):Math.floor(a),x.css({left:a+"px"}))),w=parseInt(T.css("top"))/(I.outerHeight()-T.outerHeight()),r=w*(I[0].scrollHeight-I.outerHeight()),o.horizontal&&(m=parseInt(x.css("left"))/(I.outerWidth()-x.outerWidth()),a=m*(I[0].scrollWidth-I.outerWidth())),s){r=i;var d=r/I[0].scrollHeight*I.outerHeight();if(offsetTopY=Math.min(Math.max(d,0),l),T.css({top:offsetTopY+"px"}),o.horizontal){a=t;var u=a/I[0].scrollWidth*I.outerWidth();offsetTopX=Math.min(Math.max(u,0),c),x.css({left:offsetTopX+"px"})}}I.scrollTop(r),o.horizontal&&I.scrollLeft(a),I.trigger("slimscrolling",~~r,o.horizontal&&a),n(),h()}function a(t){window.addEventListener?(t.addEventListener("DOMMouseScroll",e,!1),t.addEventListener("mousewheel",e,!1)):document.attachEvent("onmousewheel",e)}function r(){g=Math.max(I.outerHeight()/I[0].scrollHeight*I.outerHeight(),R),T.css({height:g+"px"});var t=g==I.outerHeight()?"none":"block";T.css({display:t})}function l(){if(o.horizontal){v=Math.max(I.outerWidth()/I[0].scrollWidth*I.outerWidth(),S),x.css({width:v+"px"});var t=~~v==~~I.outerWidth()?"none":"block";x.css({display:t})}}function n(){if(r(),l(),clearTimeout(p),w==~~w||m==~~m){M=o.allowPageScroll;var t,i;y!==w&&(t=0==~~w?"top":"bottom"),z!==m&&(i=0==~~m?"left":"right"),i&&I.trigger("slimscroll",t,i)}else M=!1;y=w,z=m,g>=I.outerHeight()?M=!0:(T.stop(!0,!0).fadeIn("fast"),o.railVisible&&D.stop(!0,!0).fadeIn("fast")),o.horizontal&&(v>=I.outerWidth()?M=!0:(x.stop(!0,!0).fadeIn("fast"),o.railVisible&&C.stop(!0,!0).fadeIn("fast")))}function h(){o.alwaysVisible||(p=setTimeout(function(){o.disableFadeOut&&c||d||u||(T.fadeOut("slow"),D.fadeOut("slow"),o.horizontal&&(x.fadeOut("slow"),C.fadeOut("slow")))},1e3))}var c,d,u,p,f,g,b,v,m,w,z,y,x,C,H="<div></div>",R=30,S=30,M=!1,I=t(this);if(I.parent().hasClass(o.wrapperClass)){var W=I.scrollTop();if(T=I.siblings("."+o.barClass),D=I.siblings("."+o.railClass),o.horizontal&&(x=I.siblings("."+o.barClassH),C=I.siblings("."+o.railClassH)),r(),l(),t.isPlainObject(i)){if("height"in i&&"auto"==i.height){I.parent().css("height","auto"),I.css("height","auto");var B=I.parent().parent().height();I.parent().css("height",B),I.css("height",B)}else if("height"in i){var V=i.height;I.parent().css("height",V),I.css("height",V)}if("scrollTo"in i)W=parseInt(o.scrollTo);else if("scrollBy"in i)W+=parseInt(o.scrollBy);else if("destroy"in i)return T.remove(),D.remove(),o.horizontal&&(x.remove(),C.remove()),void I.unwrap();s(0,W,!1,!0)}}else if(!(t.isPlainObject(i)&&"destroy"in i)){o.height="auto"==o.height?I.parent().height():o.height;var k=o.horizontal?"calc(100% - {0}px)".f(o.size):"100%",O=t(H).addClass(o.wrapperClass).css({position:"relative",overflow:"hidden",width:o.width,height:o.height});I.css({overflow:"hidden",width:o.width,height:o.height});var D=t(H).addClass(o.railClass).css({width:o.size,height:k,position:"absolute",top:0,display:o.alwaysVisible&&o.railVisible?"block":"none","border-radius":o.railBorderRadius,background:o.railColor,opacity:o.railOpacity,zIndex:90}),T=t(H).addClass(o.barClass).css({background:o.color,width:o.size,position:"absolute",top:0,opacity:o.opacity,display:o.alwaysVisible?"block":"none","border-radius":o.borderRadius,BorderRadius:o.borderRadius,MozBorderRadius:o.borderRadius,WebkitBorderRadius:o.borderRadius,zIndex:99});C=o.horizontal&&t(H).addClass(o.railClassH).css({width:k,height:o.size,position:"absolute",left:0,display:o.alwaysVisible&&o.horizontal&&o.railVisible?"block":"none","border-radius":o.railBorderRadius,background:o.railColor,opacity:o.railOpacity,zIndex:90}),x=o.horizontal&&t(H).addClass(o.barClassH).css({background:o.color,height:o.size,position:"absolute",left:0,opacity:o.opacity,display:o.alwaysVisible&&o.horizontal?"block":"none","border-radius":o.borderRadius,BorderRadius:o.borderRadius,MozBorderRadius:o.borderRadius,WebkitBorderRadius:o.borderRadius,zIndex:99});var E="right"==o.position?{right:o.distance}:{left:o.distance};if(D.css(E),T.css(E),I.wrap(O),I.parent().append(T),I.parent().append(D),o.horizontal&&(E={bottom:o.distance},C.css(E),x.css(E),I.parent().append(x),I.parent().append(C)),o.railDraggable){var X,Y,P;T.bind("mousedown",function(i){var e=t(document);return u=!0,X=parseFloat(T.css("top")),Y=i.pageY,e.bind("mousemove.slimscroll",function(t){P=X+t.pageY-Y,T.css("top",P),s(0,0,T.position().top,!1)}),e.bind("mouseup.slimscroll",function(t){u=!1,h(),e.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(t){return t.stopPropagation(),t.preventDefault(),!1}),o.horizontal&&x.bind("mousedown",function(i){var e=t(document);u=!0;var o=parseFloat(x.css("left")),a=i.pageX;return e.bind("mousemove.slimscroll",function(t){x.css("left",o+t.pageX-a),s(0,0,x.position().left,!1)}),e.bind("mouseup.slimscroll",function(t){u=!1,h(),e.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(t){return t.stopPropagation(),t.preventDefault(),!1})}if(D.hover(function(){n()},function(){h()}),T.hover(function(){d=!0},function(){d=!1}),o.horizontal&&(C.hover(function(){n()},function(){h()}),x.hover(function(){d=!0},function(){d=!1})),I.hover(function(){c=!0,n(),h()},function(){c=!1,h()}),I.bind("touchstart",function(t,i){if(t.originalEvent.touches.length){var e=t.originalEvent.touches[0];f=e.pageX,b=e.pageY}}),I.bind("touchmove",function(t){if(M||t.originalEvent.preventDefault(),t.originalEvent.touches.length){var i=t.originalEvent.touches[0],e=(f-i.pageX)/o.touchScrollStep,a=(b-i.pageY)/o.touchScrollStep;s(e,a,!0),f=i.pageX,b=i.pageY}}),r(),l(),"bottom"===o.start)T.css({top:I.outerHeight()-T.outerHeight()}),s(0,0,!0);else if("top"!==o.start){var F=t(o.start).position();s(F.left,F.top,null,!0),o.alwaysVisible||(T.hide(),x.hide())}a(this)}}),this}}),t.fn.extend({slimscroll:t.fn.slimScroll})}(jQuery);